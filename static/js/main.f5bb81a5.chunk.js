(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{134:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},139:function(e,t,a){e.exports=a(255)},148:function(e,t,a){},150:function(e,t,a){},157:function(e,t){},159:function(e,t){},169:function(e,t){},171:function(e,t){},198:function(e,t){},199:function(e,t){},204:function(e,t){},206:function(e,t){},213:function(e,t){},232:function(e,t){},248:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){},253:function(e,t,a){},255:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(50),c=a.n(o),s=a(15),i=a(38),l=a(5),u=a(36),m=a(10),p=a(11),d=a(14),v=a(13),f=a(12),b=a(37),h=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.dataTestId,n=e.value,o=e.type,c=e.onChange;return r.a.createElement("input",{className:"form-control",type:o,required:"required",name:t,placeholder:t,"data-testid":a,value:n,onChange:c})}}]),a}(r.a.Component),E=[{name:"Nome",type:"text",dataTestId:"input-player-name"},{name:"Email",type:"email",dataTestId:"input-gravatar-email"}],g=function(){return fetch("https://opentdb.com/api_token.php?command=request").then((function(e){return e.json().then((function(t){return e.ok?Promise.resolve(t):Promise.reject(t)}))}))};function y(){return function(e){return e({type:"REQUESTING_TOKEN"}),g().then((function(t){return e((a=t.token,localStorage.setItem("token",a),{type:"FOUND_TOKEN",token:a}));var a}),(function(t){return e(function(e){return{type:"TOKEN_NOT_FOUND",error:e}}(t.message))}))}}a(148);var k=a(134),O=a.n(k),N=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={Nome:"",Email:"",Disabled:!0},e.stateUpdater=e.stateUpdater.bind(Object(d.a)(e)),e.disableCheck=e.disableCheck.bind(Object(d.a)(e)),e.setLocalStorage=e.setLocalStorage.bind(Object(d.a)(e)),e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.fetchToken)()}},{key:"settingsButton",value:function(){return r.a.createElement("div",{className:"float-right"},r.a.createElement(s.b,{to:"settings"},r.a.createElement("button",{type:"button","data-testid":"btn-settings",className:"btn-set"},r.a.createElement(b.a,{size:"25"}))))}},{key:"setLocalStorage",value:function(){var e=this.state,t={player:{name:e.Nome,gravatarEmail:e.Email,assertions:0,score:0}};localStorage.setItem("state",JSON.stringify(t))}},{key:"disableCheck",value:function(){var e=this.state,t=e.Nome,a=e.Email;""!==t&&""!==a?this.setState((function(){return{Disabled:!1}})):this.setState((function(){return{Disabled:!0}}))}},{key:"stateUpdater",value:function(e){var t=this,a=e.target,n=a.name,r=a.value;this.setState((function(){return Object(u.a)({},n,r)}),(function(){return t.disableCheck()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.Disabled,n=t.Nome,o=t.Email;return r.a.createElement("div",{className:"full-container"},r.a.createElement("div",{className:"login-form"},r.a.createElement("img",{src:O.a,alt:"trivia",className:"text-center trivia-logo"}),r.a.createElement("form",null,E.map((function(t){var a=t.name,c=t.type,s=t.dataTestId;return r.a.createElement(h,{key:a,name:a,value:"Nome"===a?n:o,type:c,dataTestId:s,onChange:e.stateUpdater})}))),r.a.createElement(s.b,{className:"link-play",to:"/gamepage"},r.a.createElement("button",{type:"button","data-testid":"btn-play",disabled:a,onClick:this.setLocalStorage,id:"play-button",className:"btn btn-info btn-block"},"Jogar!!")),this.settingsButton()))}}]),a}(r.a.Component),S=Object(i.b)(null,(function(e){return{fetchToken:function(){return e(y())}}}))(N),j=(a(150),function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={amount:"5",category:"",difficult:"",type:"",redirect:!1},e.stateUpdater=e.stateUpdater.bind(Object(d.a)(e)),e.saveChanges=e.saveChanges.bind(Object(d.a)(e)),e}return Object(p.a)(a,[{key:"saveChanges",value:function(){localStorage.settings=JSON.stringify(this.state),this.setState({redirect:!0})}},{key:"stateUpdater",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(u.a)({},a,n))}},{key:"render",value:function(){var e=this.state,t=e.redirect,a=e.amount,n=e.category,o=e.difficult,c=e.type;return t?r.a.createElement(l.a,{to:"/"}):r.a.createElement("div",{className:"settings-container"},r.a.createElement("h1",{"data-testid":"settings-title",className:"h1"},"Settings"),r.a.createElement(s.b,{to:"/"},r.a.createElement("button",{type:"button",className:"btn btn-info home"},r.a.createElement(b.b,null))),r.a.createElement("form",{className:"form-api"},r.a.createElement("div",{className:"flex-labels"},r.a.createElement("label",{htmlFor:"amount"},"Number of Questions:",r.a.createElement("input",{type:"number",name:"amount",id:"trivia_amount",className:"form-control",onChange:this.stateUpdater,min:"1",max:"50",value:a})),r.a.createElement("label",{htmlFor:"category"},"Select Category:",r.a.createElement("select",{onChange:this.stateUpdater,name:"category",value:n,className:"form-control"},r.a.createElement("option",{value:""},"Any Category"),r.a.createElement("option",{value:"9"},"General Knowledge"),r.a.createElement("option",{value:"10"},"Entertainment: Books"),r.a.createElement("option",{value:"11"},"Entertainment: Film"),r.a.createElement("option",{value:"12"},"Entertainment: Music"),r.a.createElement("option",{value:"13"},"Entertainment: Musicals & Theatres"),r.a.createElement("option",{value:"14"},"Entertainment: Television"),r.a.createElement("option",{value:"15"},"Entertainment: Video Games"),r.a.createElement("option",{value:"16"},"Entertainment: Board Games"),r.a.createElement("option",{value:"17"},"Science & Nature"),r.a.createElement("option",{value:"18"},"Science: Computers"),r.a.createElement("option",{value:"19"},"Science: Mathematics"),r.a.createElement("option",{value:"20"},"Mythology"),r.a.createElement("option",{value:"21"},"Sports"),r.a.createElement("option",{value:"22"},"Geography"),r.a.createElement("option",{value:"23"},"History"),r.a.createElement("option",{value:"24"},"Politics"),r.a.createElement("option",{value:"25"},"Art"),r.a.createElement("option",{value:"26"},"Celebrities"),r.a.createElement("option",{value:"27"},"Animals"),r.a.createElement("option",{value:"28"},"Vehicles"),r.a.createElement("option",{value:"29"},"Entertainment: Comics"),r.a.createElement("option",{value:"30"},"Science: Gadgets"),r.a.createElement("option",{value:"31"},"Entertainment: Japanese Anime & Manga"),r.a.createElement("option",{value:"32"},"Entertainment: Cartoon & Animations"))),r.a.createElement("label",{htmlFor:"difficult"},"Select Difficulty:",r.a.createElement("select",{onChange:this.stateUpdater,name:"difficult",value:o,className:"form-control"},r.a.createElement("option",{value:""},"Any Difficulty"),r.a.createElement("option",{value:"easy"},"Easy"),r.a.createElement("option",{value:"medium"},"Medium"),r.a.createElement("option",{value:"hard"},"Hard"))),r.a.createElement("label",{htmlFor:"type"},"Select Type:",r.a.createElement("select",{onChange:this.stateUpdater,value:c,name:"type",className:"form-control"},r.a.createElement("option",{value:""},"Any Type"),r.a.createElement("option",{value:"multiple"},"Multiple Choice"),r.a.createElement("option",{value:"boolean"},"True / False"))),r.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",type:"button",onClick:this.saveChanges},"Confirm Settings"))))}}]),a}(r.a.Component)),w=a(17),C=a(79),T=a.n(C),A=a(135),x=function(e,t){return function(){var a=Object(A.a)(T.a.mark((function a(n){var r,o,c,s,i,l;return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r={},""===t){a.next=8;break}return o=t.amount,c=t.category,s=t.difficult,i=t.type,a.next=5,fetch("https://opentdb.com/api.php?amount=".concat(o,"&category=").concat(c,"&difficulty=").concat(s,"&type=").concat(i,"&token=").concat(e));case 5:r=a.sent,a.next=11;break;case 8:return a.next=10,fetch("https://opentdb.com/api.php?amount=5&token=".concat(e));case 10:r=a.sent;case 11:return a.next=13,r.json();case 13:l=a.sent,n({type:"TOKEN_SUCCESS",questions:l});case 15:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},q=a(138),F=a(52),M=a.n(F),U=a(136),I=(a(248),function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={disable:!1,tempo:30,currentQuestion:0,assertions:0},e.timerFunction=e.timerFunction.bind(Object(d.a)(e)),e.stopCounter=e.stopCounter.bind(Object(d.a)(e)),e.nextQuestion=e.nextQuestion.bind(Object(d.a)(e)),e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.timerFunction()}},{key:"nextQuestion",value:function(){this.setState((function(e){return{currentQuestion:e.currentQuestion+1,disable:!1,tempo:30}})),this.timerFunction();var e=document.querySelectorAll("[value=WrongAnswer]");document.querySelectorAll("[value=CorrectAnswer]").forEach((function(e){e.style.border=""})),e.forEach((function(e){e.style.border=""}))}},{key:"scored",value:function(){var e,t=JSON.parse(localStorage.getItem("state")),a=this.state,n=a.tempo,r=a.currentQuestion,o=a.assertions;switch(this.props.question[r].difficulty){case"easy":e=1;break;case"medium":e=2;break;case"hard":e=3}var c=t.player.score;c=c+10+e*n,localStorage.setItem("state",JSON.stringify({player:Object(w.a)({},t.player,{score:c,assertions:o})}))}},{key:"choosed",value:function(e){var t=this;"CorrectAnswer"===e.target.value?this.setState((function(e){return{disable:!0,assertions:e.assertions+1}}),(function(){return t.scored()})):this.setState({disable:!0}),this.stopCounter();var a=document.querySelectorAll("[value=WrongAnswer]");document.querySelectorAll("[value=CorrectAnswer]").forEach((function(e){e.style.border="3px solid rgb(6, 240, 15)"})),a.forEach((function(e){e.style.border="3px solid rgb(255, 0, 0)"}))}},{key:"stopCounter",value:function(){window.clearInterval(this.interval)}},{key:"timerFunction",value:function(){var e=this;this.interval=setInterval((function(){if(e.setState((function(e){return Object(w.a)({},e,{tempo:e.tempo-1})})),e.state.tempo<1){e.stopCounter(),e.setState({resposta:"WrongAnswer",disable:!0});var t=document.querySelectorAll("[value=WrongAnswer]");document.querySelectorAll("[value=CorrectAnswer]").forEach((function(e){e.style.border="3px solid rgb(6, 240, 15)"})),t.forEach((function(e){e.style.border="3px solid rgb(255, 0, 0)"}))}}),1e3)}},{key:"timer",value:function(){var e=this.state.tempo;return r.a.createElement("div",{className:"div-time"},r.a.createElement(U.a,{className:"stop-watch",size:"50"}),r.a.createElement("span",{className:"time"},e))}},{key:"decode",value:function(e){var t={"&amp;":"&","&#038;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#039;":"'","&#8217;":"\u2019","&#8216;":"\u2018","&#8211;":"\u2013","&#8212;":"\u2014","&#8230;":"\u2026","&#8221;":"\u201d"};return e.replace(/&[\w\d#]{2,5};/g,(function(e){return t[e]}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.currentQuestion,n=t.disable,o=this.props.question,c=this.timer();if(a===o.length){var s=JSON.parse(localStorage.state),i=M()(s.player.gravatarEmail);return localStorage.ranking?localStorage.ranking=JSON.stringify([].concat(Object(q.a)(JSON.parse(localStorage.ranking)),[{name:s.player.name,score:s.player.score,picture:"https://www.gravatar.com/avatar/".concat(i)}])):localStorage.ranking=JSON.stringify([{name:s.player.name,score:s.player.score,picture:"https://www.gravatar.com/avatar/".concat(i)}]),r.a.createElement(l.a,{to:"/feedback"})}return r.a.createElement("div",null,r.a.createElement("div",{className:"div-questions"},c,r.a.createElement("h4",{"data-testid":"question-category"},o[a].category),r.a.createElement("p",{"data-testid":"question-text",className:"question"},this.decode(o[a].question))),o[a].respostas.map((function(t,a){return r.a.createElement("div",{key:a,className:"text-center"},r.a.createElement("button",{className:"col-md-6 option btn-sm",key:a,type:"button",value:t.value,"data-testid":t.dataTestid,disabled:n,onClick:function(t){return e.choosed(t)}},e.decode(t.resposta)))})),n&&r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{className:"btn-next btn btn-primary","data-testid":"btn-next",onClick:this.nextQuestion,type:"button"},"Pr\xf3xima")))}}]),a}(r.a.Component)),J=(a(249),function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(m.a)(this,a),n=t.call(this,e);var r=JSON.parse(localStorage.getItem("state"));return n.state={avatar:"https://www.gravatar.com/avatar/".concat(M()(r.player.gravatarEmail)),score:r.player.score,name:r.player.name},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.state,t=e.avatar,a=e.score,n=e.name;return r.a.createElement("header",{className:"header"},r.a.createElement("div",null,r.a.createElement("img",{src:t,alt:"avatar","data-testid":"header-profile-picture",className:"avatar"}),r.a.createElement("strong",{"data-testid":"header-player-name"}," Jogador: ".concat(n)),r.a.createElement("div",{className:"score"},r.a.createElement("strong",null,r.a.createElement("span",null,"Pontos: "),r.a.createElement("span",{"data-testid":"header-score"},a)))))}}]),a}(n.Component)),D=(a(250),function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchQuestion,a=e.token,n="";localStorage.settings&&(n=JSON.parse(localStorage.settings)),t(a,n)}},{key:"shuffle",value:function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e}},{key:"render",value:function(){var e=this,t=this.props.questions,a=[];return t.length>0&&(a=t[0].results.map((function(t){var a=t.correct_answer,n=t.incorrect_answers;if("boolean"===t.type){if("True"===a){var r=[{resposta:a,dataTestid:"correct-answer",value:"CorrectAnswer"},{resposta:n[0],dataTestid:"wrong-answer-0",value:"WrongAnswer"}];return Object(w.a)({},t,{respostas:r})}var o=[{resposta:n[0],dataTestid:"wrong-answer-0",value:"WrongAnswer"},{resposta:a,dataTestid:"correct-answer",value:"CorrectAnswer"}];return Object(w.a)({},t,{respostas:o})}var c=[{resposta:a,dataTestid:"correct-answer",value:"CorrectAnswer"},{resposta:n[0],dataTestid:"wrong-answer-0",value:"WrongAnswer"},{resposta:n[1],dataTestid:"wrong-answer-1",value:"WrongAnswer"},{resposta:n[2],dataTestid:"wrong-answer-2",value:"WrongAnswer"}],s=e.shuffle(c);return Object(w.a)({},t,{respostas:s})}))),r.a.createElement("div",{className:"game-container"},r.a.createElement(J,null),t.length>0?r.a.createElement(I,{question:a}):"Loading...")}}]),a}(r.a.Component)),Q=Object(i.b)((function(e){return{token:e.tokenReducer.token,questions:e.questionsReducer.questions}}),(function(e){return{fetchQuestion:function(t,a){return e(x(t,a))}}}))(D),_=function(){return r.a.createElement("div",null,r.a.createElement("h1",null," Nenhum player encontrado. Volte depois."))},K=(a(251),function(e){var t=e.entry,a=e.index,n=t.name,o=t.picture,c=t.score;return r.a.createElement("li",null,r.a.createElement("div",null,r.a.createElement("img",{src:o,alt:n}),r.a.createElement("h5",{"data-testid":"player-name-".concat(a)},n),r.a.createElement("h5",{"data-testid":"player-score-".concat(a)},c)))}),P=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={players:JSON.parse(localStorage.ranking||"[]")},e.sortingPlayers=e.sortingPlayers.bind(Object(d.a)(e)),e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.sortingPlayers()}},{key:"sortingPlayers",value:function(){var e=this.state.players;e.length>1&&this.setState({players:e.sort((function(e,t){return parseInt(t.score,10)-parseInt(e.score,10)}))})}},{key:"render",value:function(){var e=this.state.players;return r.a.createElement("div",{className:"full-container"},r.a.createElement(s.b,{to:"/"},r.a.createElement("button",{"data-testid":"btn-go-home",className:"btn btn-info home",type:"button"},r.a.createElement(b.b,null))),r.a.createElement("h1",{"data-testid":"ranking-title"},"Melhores Jogadas"),r.a.createElement("ol",null,e?e.map((function(e,t){return r.a.createElement(K,{key:"".concat(t,"has"),index:t,entry:e})})):r.a.createElement(_,null)))}}]),a}(r.a.Component),G=(a(252),function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a),e=t.call(this);var n=JSON.parse(localStorage.getItem("state"));return e.state={assertions:n.player.assertions,score:n.player.score},e}return Object(p.a)(a,[{key:"ggMessage",value:function(){return r.a.createElement("h1",{className:"h1"},"Mandou bem!")}},{key:"bgMessage",value:function(){return r.a.createElement("h1",{className:"h1"},"Podia ser melhor...")}},{key:"gameFeedback",value:function(e,t){return r.a.createElement("section",{className:"section"},r.a.createElement("p",null,r.a.createElement("span",null,"Voc\xea acertou "),r.a.createElement("span",{"data-testid":"feedback-total-question"},e),r.a.createElement("span",null," quest\xf5es!")),r.a.createElement("p",null,r.a.createElement("span",null,"Um total de "),r.a.createElement("span",{"data-testid":"feedback-total-score"},t),r.a.createElement("span",null," pontos ")))}},{key:"render",value:function(){var e=this.state,t=e.assertions,a=e.score;return r.a.createElement("div",{className:"feedback-container"},r.a.createElement("main",{className:"section"},r.a.createElement(J,null),r.a.createElement("h2",{"data-testid":"feedback-text"},t>=3?this.ggMessage():this.bgMessage()),this.gameFeedback(t,a),r.a.createElement("div",null,r.a.createElement(s.b,{className:"link",to:"/ranking","data-testid":"btn-ranking"},"VER RANKING")),r.a.createElement("div",null,r.a.createElement(s.b,{className:"link",to:"/","data-testid":"btn-play-again"},"JOGAR NOVAMENTE"))))}}]),a}(n.Component));a(253),a(254);function R(){return r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/ranking",component:P}),r.a.createElement(l.b,{path:"/settings",component:j}),r.a.createElement(l.b,{path:"/gamepage",component:Q}),r.a.createElement(l.b,{path:"/feedback",component:G}),r.a.createElement(l.b,{exact:!0,path:"/",component:S}))}var W=a(25),V=a(137),B={isFetching1:!1,token:"",error1:""},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUESTING_TOKEN":return Object(w.a)({},e,{isFetching1:!0});case"FOUND_TOKEN":return Object(w.a)({},e,{token:t.token,isFetching1:!1});case"TOKEN_NOT_FOUND":return Object(w.a)({},e,{error1:t.error,isFetching1:!1});default:return e}},z={questions:[]};var H=Object(W.c)({tokenReducer:L,questionsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOKEN_SUCCESS":return Object(w.a)({},e,{questions:[t.questions]});default:return e}}}),X=Object(W.e)(H,Object(W.d)(Object(W.a)(V.a)));c.a.render(r.a.createElement(s.a,null,r.a.createElement(i.a,{store:X},r.a.createElement(R,null))),document.getElementById("root"))}},[[139,1,2]]]);
//# sourceMappingURL=main.f5bb81a5.chunk.js.map